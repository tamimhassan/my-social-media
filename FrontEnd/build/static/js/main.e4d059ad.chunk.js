(this["webpackJsonpreact-fornt"]=this["webpackJsonpreact-fornt"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/defaultAvatar.e11b93a0.png"},24:function(e,t,a){e.exports=a(34)},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),o=a(1),s=a(2),m=a(22),i=function(e){return"undefined"!==typeof window&&localStorage.removeItem("jwt"),e(),fetch("".concat("http://localhost:5000","/signout"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},u=function(){return"undefined"!==typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},d=function(e){var t=e.component,a=Object(m.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return u()?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))};var p=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",null,"Home"),r.a.createElement("p",{className:"lead"},"Welcome to React Frontend"))},f=a(10),E=a.n(f);var h=Object(s.g)((function(e){var t=e.history,a=function(e,t){return e.location.pathname===t?{color:"#1f6faf"}:{color:"#ffffff"}};return r.a.createElement("div",null,r.a.createElement("nav",{className:"mb-1 navbar navbar-expand-sm navbar-dark orange lighten-1"},r.a.createElement(o.b,{className:"navbar-brand",to:"/"},"Navbar"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent-555","aria-controls":"navbarSupportedContent-555","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent-555"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/",className:"nav-link",style:a(t,"/")},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/users",className:"nav-link",style:a(t,"/users")},"Users")),!u()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/signin",className:"nav-link",style:a(t,"/signin")},"Sign In")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/signup",className:"nav-link",style:a(t,"/signup")},"Sign Up"))),u()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{style:{cursor:"pointer"},className:"nav-link",onClick:function(){return i((function(){return t.push("/")}))}},"Sign Out")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/user/".concat(u().user._id),className:"nav-link p-0"},r.a.createElement("img",{src:E.a,className:"rounded-circle z-depth-0",alt:"avatar",height:"35"}))))))))})),b=a(14),g=a(19),v=a(20),N=a(23),y=a(21),j=function(e,t){return fetch("".concat("http://localhost:5000","/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},S=function(e){Object(N.a)(a,e);var t=Object(y.a)(a);function a(){var e;return Object(g.a)(this,a),(e=t.call(this)).init=function(t){var a=u().token;j(t,a).then((function(t){console.log(t),t&&t.error?e.setState({redirectToProfile:!0}):e.setState({id:t._id,name:t.name,email:t.email,error:""})}))},e.isValid=function(){var t=e.state,a=t.name,n=t.email,r=t.password;return t.fileSize>1e5?(e.setState({error:"File size should be less than 100kb"}),!1):0===a.length?(e.setState({error:"Name is required"}),!1):/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i.test(n)?!(r.length>=1&&r.length<=5)||(e.setState({error:"Password must be at least 6 characters long"}),!1):(e.setState({error:"A valid Email is required"}),!1)},e.handleChange=function(t){return function(a){var n;e.setState({error:""});var r="photo"===t?a.target.files[0]:a.target.value,l="photo"===t?a.target.files[0].size:0;e.userData.set(t,r),e.setState((n={},Object(b.a)(n,t,r),Object(b.a)(n,"fileSize",l),n))}},e.updateHandler=function(t){t.preventDefault(),e.setState({loading:!0})},e.state={id:"",name:"",email:"",password:"",redirectToProfile:!1,error:"",fileSize:0,loading:!1},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.userData=new FormData;var e=this.props.match.params.userId;this.init(e)}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.name,n=e.email,l=e.password,c=e.redirectToProfile,o=e.error,m=e.loading;return c?r.a.createElement(s.a,{to:"/user/".concat(t)}):r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Edit Profile"),r.a.createElement("div",{className:"alert alert-danger",style:{display:o?"":"none"}},o),m?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):"",r.a.createElement("form",{action:""},r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",accept:"image/*",className:"custom-file-input",onChange:this.handleChange("photo")}),r.a.createElement("label",{className:"custom-file-label"},"Choose you Profile Photo")),r.a.createElement("div",{className:"md-form form-group mt-5"},r.a.createElement("label",{style:{transform:"translateY(-14px) scale(0.8)"}},"Name"),r.a.createElement("input",{type:"text",className:"form-control",onChange:this.handleChange("name"),value:a})),r.a.createElement("div",{className:"md-form form-group mt-5"},r.a.createElement("label",{style:{transform:"translateY(-14px) scale(0.8)"}},"Email"),r.a.createElement("input",{type:"email",className:"form-control",onChange:this.handleChange("email"),value:n})),r.a.createElement("div",{className:"md-form form-group mt-5"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control",onChange:this.handleChange("password"),value:l})),r.a.createElement("button",{type:"submit",className:"btn btn-success",onClick:this.updateHandler},"Update"))))}}]),a}(n.Component),O=a(3);var w=function(e){var t=e.userId,a=Object(n.useState)(!1),l=Object(O.a)(a,2),c=l[0],o=l[1],m=function(){var e=u().token;(function(e,t){return fetch("".concat("http://localhost:5000","/user/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(t,e).then((function(e){e.error?console.log(e.error):(i((function(){return console.log("User is deleted")})),o(!0))}))};return c?r.a.createElement(s.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-danger",onClick:function(){window.confirm("Are you sure you want to delete your account?")&&m()}},"Delete Profile"))};var C=function(e){var t=Object(n.useState)(""),a=Object(O.a)(t,2),l=a[0],c=a[1],m=Object(n.useState)(!1),i=Object(O.a)(m,2),d=i[0],p=i[1];return Object(n.useEffect)((function(){var t=e.match.params.userId,a=u().token;j(t,a).then((function(e){e&&e.error?p(!0):c(e)}))}),[e]),d?r.a.createElement(s.a,{to:"/signin"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Profile"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("img",{src:E.a,className:"",alt:"avatar",style:{width:"100%",height:"15vw",objectFit:"cover"}})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"lead mt-2"},r.a.createElement("p",null,"Hello ",l.name),r.a.createElement("p",null,"Email: ",l.email),r.a.createElement("p",null,"Joined ".concat(new Date(l.created).toDateString()))),u().user&&u().user._id===l._id&&r.a.createElement("div",{className:"d-flex-root mt-2"},r.a.createElement(o.b,{to:"/user/edit/".concat(l._id),className:"btn btn-success mr-4",style:{float:"left"}},"Edit Profilt"),r.a.createElement(w,{userId:l._id})))))};var x=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),m=Object(O.a)(c,2),i=m[0],u=m[1],d=Object(n.useState)(""),p=Object(O.a)(d,2),f=p[0],E=p[1],h=Object(n.useState)(!1),b=Object(O.a)(h,2),g=b[0],v=b[1],N=Object(n.useState)(!1),y=Object(O.a)(N,2),j=y[0],S=y[1],w=function(e,t){E(""),t(e.target.value)};return g?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"SignIn"),r.a.createElement("div",{className:"alert alert-danger",style:{display:f?"":"none"}},f),j?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):"",r.a.createElement("form",{action:""},r.a.createElement("div",{className:"md-form form-group mt-5"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",className:"form-control",onChange:function(e){return w(e,l)},value:a})),r.a.createElement("div",{className:"md-form form-group mt-5"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control",onChange:function(e){return w(e,u)},value:i})),r.a.createElement("button",{type:"submit",className:"btn btn-success",onClick:function(e){e.preventDefault(),S(!0),function(e){return fetch("".concat("http://localhost:5000","/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({email:a,password:i}).then((function(e){var t,a;e.error?(E(e.error),S(!1)):(t=e,a=function(){v(!0)},"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(t)),a()))}))}},"Submit")),r.a.createElement("p",{className:"mt-4",style:{color:"#29303b",fontWeight:"400"}},"Don't have an account?"," ",r.a.createElement(o.b,{to:"/signup",style:{color:"#007791",fontWeight:"bold"}},"Sign up")))};var k=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),s=Object(O.a)(c,2),m=s[0],i=s[1],u=Object(n.useState)(""),d=Object(O.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(""),h=Object(O.a)(E,2),b=h[0],g=h[1],v=Object(n.useState)(!1),N=Object(O.a)(v,2),y=N[0],j=N[1],S=function(e,t){g(""),t(e.target.value)};return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"SignUp"),r.a.createElement("div",{className:"alert alert-danger",style:{display:b?"":"none"}},b),r.a.createElement("div",{className:"alert alert-info",style:{display:y?"":"none"}},"New account is successfully created. Please"," ",r.a.createElement(o.b,{to:"/signin"},"Sign In")),r.a.createElement("form",{action:""},r.a.createElement("div",{className:"md-form form-group mt-5"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return S(e,l)},value:a})),r.a.createElement("div",{className:"md-form form-group mt-5"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",className:"form-control",onChange:function(e){return S(e,i)},value:m})),r.a.createElement("div",{className:"md-form form-group mt-5"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control",onChange:function(e){return S(e,f)},value:p})),r.a.createElement("button",{type:"submit",className:"btn btn-success",onClick:function(e){e.preventDefault(),function(e){return fetch("".concat("http://localhost:5000","/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({name:a,email:m,password:p}).then((function(e){e.error?g(e.error):(g(""),l(""),f(""),i(""),j(!0))}))}},"Submit")),r.a.createElement("p",{className:"mt-4",style:{color:"#29303b",fontWeight:"400"}},"Already have an account?"," ",r.a.createElement(o.b,{to:"/signin",style:{color:"#007791",fontWeight:"bold"}},"Sign In")))};var P=function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){fetch("".concat("http://localhost:5000","/users"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):l(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Users"),r.a.createElement("div",{className:"row"},a.map((function(e,t){return r.a.createElement("div",{className:"col-xl-3 col-md-4 col-sm-6 col-xs-12 mb-4",key:t},r.a.createElement("div",{className:"card testimonial-card"},r.a.createElement("div",{className:"card-up sunny-morning-gradient",style:I}),r.a.createElement("div",{className:"avatar mx-auto white",style:T},r.a.createElement("img",{src:"https://mdbootstrap.com/img/Photos/Avatars/img%20(27).jpg",className:"rounded-circle",style:A,alt:"avatar"})),r.a.createElement("div",{className:"card-body",style:D},r.a.createElement("h4",{className:"card-title"},e.name),r.a.createElement("h6",{className:"font-weight-bold indigo-text py-2"}),r.a.createElement("hr",null),r.a.createElement("p",null,e.email),r.a.createElement(o.b,{to:"/user/".concat(e._id),className:"btn sunny-morning-gradient"},"View Profile"))))})))))},I={height:"120px",overflow:"hidden",borderTopLeftRadius:"0.25rem",borderTopRightRadius:"0.25rem"},T={width:"120px",marginTop:"-60px",overflow:"hidden",border:"5px solid #fff",borderRadius:"50%"},A={width:"100%"},D={textAlign:"center"};var z=function(){return r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:p}),r.a.createElement(s.b,{path:"/users",component:P}),r.a.createElement(s.b,{path:"/signup",component:k}),r.a.createElement(s.b,{path:"/signin",component:x}),r.a.createElement(d,{path:"/user/:userId",exact:!0,component:C}),r.a.createElement(d,{path:"/user/edit/:userId",component:S})))};var F=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(o.a,null,r.a.createElement(z,null)))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.e4d059ad.chunk.js.map